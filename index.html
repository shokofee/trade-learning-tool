<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Trading Simulator</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>
<style>
body {
    background-color: #0f0f0f;
    color: #fff;
    font-family: Arial, sans-serif;
    margin:0; padding:0;
}
header {
    background-color: #1f1f1f;
    text-align:center;
    padding:20px;
    font-size:28px;
    color:#00ff00;
}
.container {
    display:flex;
    flex-wrap:wrap;
    justify-content:space-around;
    padding:20px;
}
.card {
    background-color: #1a1a1a;
    border-radius:10px;
    padding:15px;
    margin:10px;
    flex:1 1 500px;
    max-width:600px;
}
input, button {
    padding:10px;
    margin:5px 0;
    width:100%;
    border-radius:5px;
    border:none;
}
button {
    background-color:#00ff00;
    color:#000;
    font-weight:bold;
    cursor:pointer;
}
button:hover {background-color:#00cc00;}
canvas {background-color:#000; border-radius:10px; margin-top:10px;}
h2 {color:#ff9900;}
p.disclaimer {font-size:12px; color:#888; margin-top:20px;}
</style>
</head>
<body>
<header>AI Trading Simulator</header>
<div class="container">

<!-- AI Predictor -->
<div class="card">
<h2>AI Trade Predictor</h2>
<input type="text" id="predictCoin" placeholder="Enter Coin Symbol (e.g., BTC)">
<input type="number" id="predictBuy" placeholder="Buy Price ($)">
<input type="number" id="predictSell" placeholder="Sell Price ($)">
<input type="number" id="predictQty" placeholder="Quantity">
<button onclick="predictTrade()">Predict Profit/Loss</button>
<p id="prediction">Prediction will appear here.</p>
<p id="analyzer">Analyzer info will appear here.</p>
</div>

<!-- Profit/Loss Calculator -->
<div class="card">
<h2>Profit/Loss Calculator</h2>
<input type="number" id="buyPrice" placeholder="Buy Price">
<input type="number" id="sellPrice" placeholder="Sell Price">
<input type="number" id="quantity" placeholder="Quantity">
<button onclick="calculateProfit()">Calculate</button>
<p id="calcResult">Result will appear here</p>
</div>

<!-- Live Coin Chart -->
<div class="card">
<h2>Live Coin Chart</h2>
<input type="text" id="chartCoin" placeholder="Enter Coin Symbol (e.g., BTC)">
<button onclick="updateCoinChart()">Load Chart</button>
<canvas id="coinChart" height="300"></canvas>
</div>

</div>

<p class="disclaimer">
Disclaimer: This project is for educational purposes only. Trades and predictions are simulated. Investing in real markets involves risk and can result in loss.
</p>

<script>
// ----------------- AI Predictor -----------------
function predictTrade() {
    const coin = document.getElementById('predictCoin').value.trim().toUpperCase();
    const buy = parseFloat(document.getElementById('predictBuy').value);
    const sell = parseFloat(document.getElementById('predictSell').value);
    const qty = parseFloat(document.getElementById('predictQty').value);

    if(!coin || !buy || !sell || !qty || buy <= 0 || sell <= 0 || qty <=0){
        alert("Enter valid data.");
        return;
    }

    const profit = (sell - buy) * qty;
    const isProfit = Math.random()>0.5;
    document.getElementById('prediction').innerText = isProfit
        ? `AI predicts PROFIT on ${coin}. Possible gain: $${profit.toFixed(2)}.`
        : `AI predicts LOSS on ${coin}. Possible loss: $${Math.abs(profit).toFixed(2)}.`;

    document.getElementById('analyzer').innerText = profit>0 
        ? "Analyzer: Trade looks promising, but always check the market."
        : "Analyzer: Caution! This trade may lead to loss.";
}

// ----------------- Profit/Loss Calculator -----------------
function calculateProfit() {
    const buy = parseFloat(document.getElementById('buyPrice').value);
    const sell = parseFloat(document.getElementById('sellPrice').value);
    const qty = parseFloat(document.getElementById('quantity').value);

    if(!buy || !sell || !qty){alert("Enter valid numbers"); return;}

    const profit = (sell - buy) * qty;
    document.getElementById('calcResult').innerText = `Profit/Loss: $${profit.toFixed(2)}`;
}

// ----------------- Live Coin Chart -----------------
let coinChart;

async function getCoinOHLC(coin) {
    try{
        const res = await fetch(`https://api.coingecko.com/api/v3/coins/${coin.toLowerCase()}/ohlc?vs_currency=usd&days=1`);
        const data = await res.json();
        // Data format: [timestamp, open, high, low, close]
        return data.map(d=>({x:new Date(d[0]), o:d[1], h:d[2], l:d[3], c:d[4]}));
    } catch(e){alert("Coin not found or API error"); return [];}
}

async function updateCoinChart(){
    const coin = document.getElementById('chartCoin').value.trim().toLowerCase();
    if(!coin){alert("Enter coin symbol"); return;}
    const ohlc = await getCoinOHLC(coin);
    if(ohlc.length===0) return;

    if(coinChart) coinChart.destroy();

    const ctx = document.getElementById('coinChart').getContext('2d');
    coinChart = new Chart(ctx, {
        type: 'candlestick',
        data: {datasets:[{label:coin.toUpperCase(), data:ohlc}]},
        options:{
            responsive:true,
            plugins:{legend:{labels:{color:'#fff'}}},
            scales:{
                x:{ticks:{color:'#fff'}, time:{unit:'hour'}},
                y:{ticks:{color:'#fff'}}
            }
        }
    });
}
</script>

</body>
</html>
